// Suur uuendus siis seekord.
// Lisasin klassi 'Tase'
// Tegin juurde/muutsin/tõstsin ümber meetode
// Olen suhteliselt kindel, et parandasin nulliga jagamise vea (testisin rohkem kui 200 jagamistehtega)

// Mis peamine - ASI TÖÖTAB! JUHHUU



// Klass Arvutustehted


public class Arvutustehted extends Punktid{
	public int esimenearv;
	public int teinearv;
	private int vastus; 
	
	public Arvutustehted() {
		esimenearv = 0;
		teinearv = 0;
		vastus= 0;
	}
	
	public int getVastus() {
		return vastus;
	}

	public void setVastus(int vastus) {
		this.vastus = vastus;
	}

	public int moodustaLiitmine(int min, int max){
		esimenearv= (int) Math.round(Math.random()*(max-min)+min);
		teinearv= (int) Math.round(Math.random()*(max-min)+min);
		vastus = esimenearv + teinearv;
		System.out.println(esimenearv + " + " + teinearv+ "=");
		return vastus;

	}
	public int moodustaLahutamine (int min, int max){
		esimenearv= (int) Math.round(Math.random()*(max-min)+min);
		teinearv= (int) Math.round(Math.random()*(max-min)+min);
		vastus = esimenearv - teinearv;
		System.out.println(esimenearv + " - " + teinearv + "=");
		return vastus;
	}
	
	public int moodustaKorrutamine (int min, int max) {
		esimenearv= (int) Math.round(Math.random()*(max-min)+min);
		teinearv= (int) Math.round(Math.random()*(max-min)+min);
		vastus = esimenearv * teinearv;
		System.out.println(esimenearv + " * " + teinearv + "=");
		return vastus;
	}
	
	public int moodustaJagamine (int min, int max) {
		esimenearv= (int) Math.round(Math.random()*(max-min)+min);
		teinearv= (int) Math.round(Math.random()*(max-min)+min);
		if (teinearv == 0){
			return moodustaJagamine(min, max);
		}
		else{
			if (esimenearv % teinearv == 0){ //kontrollin, et arv jaguks täpselt ning ei toimuks nulliga jagamist
				vastus = (int)(esimenearv / teinearv);
				System.out.println(esimenearv + " / " + teinearv + "=");
			}
			else{
				return moodustaJagamine(min, max); //kutsume nii kaua välja kuni vastab esialgsele nõudele
			}
		}
		
		return vastus;
	}

	public boolean vastuseKontroll (int sisestus){
		if (vastus == sisestus){
			return true;
		}
		else {return false; }
	}
	
	public void annaPunkt(boolean vastuseTõesus){
		int õigeteArv = getÕiged();
		int valedeArv = getValed();
		
		if (vastuseTõesus == true){
			setÕiged(õigeteArv + 1);
		}
		
		if (vastuseTõesus == false){
			setValed(valedeArv + 1);
		}
	}
	
	
}


-------------------------------------------------------------


// Klass Punktid ei muutnud midagi


public class Punktid{
	private int õiged; 
	private int valed;
	
	public Punktid() {
		
	}
	public int getÕiged() {
		return õiged;
	}
	public void setÕiged(int õiged) {
		this.õiged = õiged;
	}
	public int getValed() {
		return valed;
	}
	public void setValed(int valed) {
		this.valed = valed;
	} 
	

}


-------------------------------------------------------


// Klass Mängi


import java.util.Scanner;

public class Mängi extends Tase{

	public static void alustaMängu(Arvutustehted arvutus, int valitudTase){
		
		if (valitudTase == 1){
		
			if (arvutus.getValed()==5){ //tingimus, millal mäng peatakse
				System.out.println("Valesid vastuseid on 5.");
				return;
			}
			
			if (arvutus.getÕiged() < 3){
				esimeneTase(arvutus);			
			}
	
			else if (arvutus.getÕiged() < 10){
				teineTase(arvutus);
			}
			
			else if (arvutus.getÕiged() >= 10){
				kolmasTase(arvutus);
			}
		}
		
		else if (valitudTase == 2){
			if (arvutus.getValed()==5){ //tingimus, millal mäng peatakse
				System.out.println("Valesid vastuseid on 5.");
				return;
			}
			if (arvutus.getÕiged() < 7){
				teineTase(arvutus);
			}
			
			else if (arvutus.getÕiged() >= 7){
				kolmasTase(arvutus);
			}
			
		}
		
		else if (valitudTase == 3){
			if (arvutus.getValed()==5){ //tingimus, millal mäng peatakse
				System.out.println("Valesid vastuseid on 5.");
				return;
			}
			System.out.println("Edu!");
			kolmasTase(arvutus);
		}

	}

	public static void vastamine(Arvutustehted tehe){ // tegin lisameetodi, et koodi lühendada, igas osas on see sama.
		Scanner scan = new Scanner(System.in);
		if(scan.hasNextInt()==false){ // Kontrollib kas sisestus on int tüüpi ning kui ei ole siis mäng peatatakse
			System.out.println("Mäng on lõpetatud.");
			System.out.print("Õigeid vastuseid: " + tehe.getÕiged());
			System.out.println(", Valesid vastuseid: " + tehe.getValed());
			
		}
		else{ //kui on int tüüpi siis saab edasi mängida
		      	int taisarv = scan.nextInt();
		      	tehe.annaPunkt(tehe.vastuseKontroll(taisarv));
		      	System.out.print("Õigeid vastuseid: " + tehe.getÕiged());
		      	System.out.println(", Valesid vastuseid: " + tehe.getValed());
		      	if ((tehe.vastuseKontroll(taisarv) == true && tehe.getÕiged() == 3 && getTase() == 1)|| (tehe.vastuseKontroll(taisarv) == true && tehe.getÕiged() == 10 && getTase() == 1)){ // kontrollib, kas järgmisele tasemele jõudmiseks on piisavalt punkte 
				System.out.println("Palju õnne, jõudsite järgmisele tasemele!"); // ning väljastab selle ainult siis, kui viimane vastus oli tõene
		      	}
		      	else if (tehe.vastuseKontroll(taisarv) == true && tehe.getÕiged() == 7 && getTase() == 2){
				System.out.println("Palju õnne, jõudsite järgmisele tasemele!");
		      	}
		      	alustaMängu(tehe, getTase());}
			scan.close();
	  }
	
  }
  
  
  ---------------------------------------------------------------
  
  
// Klass Tase
  
  
import java.util.Scanner;

public class Tase{
	private static int tase;
	
	public void valiTase(){
		Scanner scan = new Scanner(System.in);
		
		if (scan.hasNextInt() == false){
			System.out.println("Palun sisestage number ühest kolmeni.");
			valiTase();
		}
		else{
			int valik = scan.nextInt();
			if (valik < 1 || valik > 3){
					System.out.println("Palun sisestage number ühest kolmeni.");
					valiTase();
				}
			else{
				tase = valik;
				Mängi.alustaMängu(new Arvutustehted(), tase);
			}
		}
		scan.close();
		
	}

	public static int getTase() {
		return tase;
	}
	
	public static void esimeneTase(Arvutustehted arvutus){
		int arv = (int) Math.round(Math.random()*1+1);
		if (arv == 1){
			arvutus.moodustaLiitmine(0,10 );
			Mängi.vastamine(arvutus);
		}
		else if (arv==2) {
			arvutus.moodustaLahutamine(0, 10);
			Mängi.vastamine(arvutus);
		}
	}
	
	public static void teineTase(Arvutustehted arvutus){
		int arv = (int) Math.round(Math.random()*3+1);
		if (arv == 1){
			arvutus.moodustaLiitmine(10, 100);
			Mängi.vastamine(arvutus);
		}
		else if (arv==2) {
			arvutus.moodustaLahutamine(10, 100);
			Mängi.vastamine(arvutus);
		}
		else if (arv==3){
			arvutus.moodustaKorrutamine(0, 10);
		Mängi.vastamine(arvutus);
		}
		else if (arv==4){
			arvutus.moodustaJagamine(0, 10);
			Mängi.vastamine(arvutus);
		}
	}
	
	public static void kolmasTase(Arvutustehted arvutus){
		int arv = (int) Math.round(Math.random()*3+1);
		if (arv == 1){
			arvutus.moodustaLiitmine(100, 1000);
			Mängi.vastamine(arvutus);
		}
		else if (arv==2) {
			arvutus.moodustaLahutamine(100, 1000);
			Mängi.vastamine(arvutus);
		}
		else if (arv==3){
			arvutus.moodustaKorrutamine(10, 100);
			Mängi.vastamine(arvutus);
		}
		else if (arv==4){
			arvutus.moodustaJagamine(10, 100);
			Mängi.vastamine(arvutus);
		}
	}
		

}	

  
-------------------------------------------------------


// Klass Test


public class TestArvutamine {

	public static void main(String[] args) { 
		System.out.println("Peast arvutamise mäng");
		System.out.println("Ülesanne: Sisestage klaviatuurilt tehte vastus.");
		System.out.println("Mängu saad mängida nii kaua, kuni sul ei ole valesid vastuseid rohkem kui 5.");
		System.out.println("Mängu peatamiseks sisesta numbri asemel täht."); // mängu kirjeldus
		System.out.println("Kõigepealt, valige tase, millelt soovite alustada(1-3)");
		Mängi mängi = new Mängi();
		mängi.valiTase();

		
	}

}

  
