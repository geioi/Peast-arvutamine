import javafx.application.Application;
import javafx.application.Platform;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class GraafikaAken extends Application {

	@Override
	public void start(Stage peaLava) {
		StringBuilder sb = new StringBuilder();
		BorderPane Paan = new BorderPane();
		TextField e = new TextField();
		e.addEventFilter(KeyEvent.KEY_TYPED, new EventHandler<KeyEvent>() {
			@Override
			public void handle(KeyEvent inputevent) {
				if (!inputevent.getCharacter().matches("\\d")) {              
					inputevent.consume();
				}
			}
		});
		e.setPrefSize(100, 60);
		e.setFont(new Font("Arial", 20));
		
		StackPane stack = new StackPane();
		Rectangle rec = new Rectangle(190, 100, Color.WHITE);
		Text tehe = new Text("here be tehe");
		tehe.setFont(new Font("Arial", 30));		
		stack.getChildren().addAll(rec, tehe);
		
		HBox all= new HBox();
		all.setPadding(new Insets(10, 10, 10, 10));
		Paan.setCenter(all);

		GridPane n = new GridPane();
		n.setVgap(10); 
		
		Label õiged = new Label("Õiged: ");
		Label õigedArv = new Label("0");	
		Label valed = new Label("Valed: ");
		Label valedArv = new Label("0");
		
		VBox ülemine = new VBox(5);
		HBox kaks = new HBox(30);
		HBox kaks_alumine = new HBox(30);
		HBox ülemine_ülemine_vasak = new HBox(5);
		HBox ülemine_ülemine_parem = new HBox(5);
		HBox ülemine_alumine_vasak = new HBox(20);
		HBox ülemine_alumine_parem = new HBox(20);
		kaks.getChildren().addAll(ülemine_ülemine_vasak, ülemine_ülemine_parem);
		kaks_alumine.getChildren().addAll(ülemine_alumine_vasak, ülemine_alumine_parem);
		ülemine.getChildren().addAll(kaks, kaks_alumine);
		ülemine_ülemine_vasak.getChildren().addAll(õiged, õigedArv);
		ülemine_ülemine_parem.getChildren().addAll(valed, valedArv);
		ülemine_alumine_parem.getChildren().add(e);
		ülemine_alumine_vasak.getChildren().add(stack);
		ülemine_alumine_vasak.setAlignment(Pos.CENTER_LEFT);
		ülemine_alumine_parem.setAlignment(Pos.CENTER_RIGHT);
		kaks.setAlignment(Pos.CENTER);
		kaks_alumine.setAlignment(Pos.CENTER);
		ülemine_ülemine_vasak.setAlignment(Pos.CENTER_LEFT);
		ülemine_ülemine_parem.setAlignment(Pos.TOP_RIGHT);
		Paan.setTop(ülemine);
		
		HBox x1=new HBox();
		x1.setSpacing(10);
		HBox x2=new HBox();
		x2.setSpacing(10);
		HBox x3=new HBox();
		x3.setSpacing(10);
		HBox x4=new HBox();
		x4.setSpacing(10);
		HBox x5 = new HBox();
		x5.setSpacing(10);
		HBox x6 = new HBox();
		x6.setSpacing(10);
		x6.setPadding(new Insets(20,20,20,20));

		n.add(x1,0,1);
		n.add(x2,0,2);
		n.add(x3,0,3);
		n.add(x4,0,4);
		n.add(x5, 0, 5);
		all.getChildren().add(n);
		x5.setAlignment(Pos.CENTER);
		all.setAlignment(Pos.CENTER);

		for (int i=1; i<10; i++){
			Button n1=new Button (new Integer(i).toString());
			n1.setTextFill(Color.BLUE);
			n1.setPrefSize(60,30);
			if (i<4){
				x3.getChildren().add(n1);
				int number = i;
				n1.setOnAction(event -> {
					sb.append(number);
					e.setText(sb.toString());
				});
				
			}
			else if (i<7){
				x2.getChildren().add(n1);
				int number = i;
				n1.setOnAction(event -> {
					sb.append(number);
					e.setText(sb.toString());
				});
			}
			else{
				x1.getChildren().add(n1);
				int number = i;
				n1.setOnAction(event -> {
					sb.append(number);
					e.setText(sb.toString());
				});
			}
		}
		Button n0=new Button ("C");
		n0.setTextFill(Color.RED);
		n0.setPrefSize(60,30);
		Button nn=new Button ("0");
		nn.setTextFill(Color.BLUE);
		nn.setPrefSize(60,30);
		Button nm=new Button ("CE");
		nm.setTextFill(Color.RED);
		nm.setPrefSize(60,30);
		x4.getChildren().addAll(n0,nn,nm);
		
		n0.setOnAction(event -> {
			if (sb.length() > 0){
				sb.deleteCharAt(sb.length()-1);
				e.setText(sb.toString());
			}
		});
		
		nn.setOnAction(event -> {
			sb.append("0");
			e.setText(sb.toString());
		});
		
		nm.setOnAction(event -> {sb.setLength(0); e.setText(sb.toString());});
		
		Button ok = new Button ("OK"); //sellel nupul veel funktsionaalsus puudub
		ok.setTextFill(Color.GREEN);
		ok.setPrefSize(60,30);
		x5.getChildren().add(ok);
		
		Button lõpeta = new Button("Lõpeta");
		lõpeta.setPrefSize(60,30);
		x6.getChildren().add(lõpeta);
		x6.setAlignment(Pos.TOP_CENTER);
		Paan.setBottom(x6);
		
		lõpeta.setOnAction(event -> Platform.exit());
		

		Scene stseen1 = new Scene(Paan,  300, 380, Color.SNOW);  // luuakse stseen  
		peaLava.setTitle("Peast Arvutamine");  // lava tiitelribale pannakse tekst
		peaLava.setScene(stseen1);  // lavale lisatakse stseen
		peaLava.setResizable(false);
		peaLava.show();  // lava tehakse nÃ¤htavaks
	}

	public static void main(String[] args) {
		launch(args);
	}
}
